%!TEX TS-program = xelatex
%!TEX encoding = UTF-8 Unicode
\PassOptionsToPackage{AutoFakeBold=true,AutoFakeSlant=true}{xeCJK}

\documentclass[12pt,openany]{book}
\usepackage[a4paper]{geometry}
\usepackage{graphicx}
\usepackage{amssymb,amsmath,amsthm}	
\usepackage{booktabs}				
\usepackage{hyperref}				
\usepackage{titlesec, titletoc}

\usepackage{xeCJK}



% è®¾ç½®ä¸»è¦å­—ä½“ï¼šæ­£æ–‡ (mainfont)ã€æ— è¡¬çº¿å­—ä½“ (sansfont) å’Œç­‰å®½å­—ä½“ (monofont)ã€‚
\setCJKmainfont[Path=/Volumes/THAWSPACE/CshProject/code_matrix.git/code/LaTex/fontFiles/æ–¹æ­£/]{FangZhengShuSong-GBK-1.ttf}
\setCJKsansfont[Path=/Volumes/THAWSPACE/CshProject/code_matrix.git/code/LaTex/fontFiles/æ–¹æ­£/]{FangZhengHeiTi-GBK-1.ttf}
\setCJKmonofont[Path=/Volumes/THAWSPACE/CshProject/code_matrix.git/code/LaTex/fontFiles/æ–¹æ­£/]{FangZhengFangSong-GBK-1.ttf}

%xeCJKï¼ˆæ¨èçš„æ–°æ–¹å¼ï¼‰
\newCJKfontfamily\kai[Path=/Volumes/THAWSPACE/CshProject/code_matrix.git/code/LaTex/fontFiles/æ–¹æ­£/]{FangZhengKaiTi-GBK-1.ttf}
\newCJKfontfamily\fsong[Path=/Volumes/THAWSPACE/CshProject/code_matrix.git/code/LaTex/fontFiles/æ–¹æ­£/]{FangZhengFangSong-GBK-1.ttf}
\newCJKfontfamily\hei[Path=/Volumes/THAWSPACE/CshProject/code_matrix.git/code/LaTex/fontFiles/æ–¹æ­£/]{FangZhengHeiTi-GBK-1.ttf}
\newCJKfontfamily\ssong[Path=/Volumes/THAWSPACE/CshProject/code_matrix.git/code/LaTex/fontFiles/æ–¹æ­£/]{FangZhengShuSong-GBK-1.ttf}
\newCJKfontfamily\FZJiaGuWen[Path=/Volumes/THAWSPACE/CshProject/code_matrix.git/code/LaTex/fontFiles/æ–¹æ­£/]{æ–¹æ­£ç”²éª¨æ–‡.ttf}

\setromanfont[Path=/Volumes/THAWSPACE/Soft.Ok/texlive/2024/texmf-dist/fonts/opentype/public/tex-gyre/
, Extension=.otf, UprightFont=*-Regular,BoldFont=*-Bold, ItalicFont=*-Italic, BoldItalicFont=*-BoldItalic
,Mapping=tex-text]{texgyrepagella}%TeX Gyre Pagella

\setsansfont[Path=/Volumes/THAWSPACE/Soft.Ok/texlive/2024/texmf-dist/fonts/opentype/public/tex-gyre/
, Extension=.otf, UprightFont=*-Regular,BoldFont=*-Bold, ItalicFont=*-Italic, BoldItalicFont=*-BoldItalic
              ,Scale=MatchLowercase,Mapping=tex-text]{texgyrepagella}

\setlength{\parindent}{0pt}  	
\linespread{1.2} 				
\setlength{\parskip}{15pt} 		

\renewcommand\contentsname{ç›®~å½•~}
\renewcommand\listfigurename{å›¾~åˆ—~è¡¨~}
\renewcommand\listtablename{è¡¨~ç›®~å½•~}

%=========================åˆ¶ä½œæ‹‡æŒ‡ç´¢å¼•===================
\usepackage{tikz,pgf}
\usetikzlibrary{shapes,calc}
\makeatletter
\newcommand\thumb{%
  \if@mainmatter
  \begingroup
  \catcode`\$=3
  \tikzpicture[remember picture,overlay] % thumb index
    \ifodd\value{page}
      \node[fill=gray,text=black,anchor=north east,xshift=2mm,
            yshift=-22mm-\arabic{chapter}*20mm,
            shape=semicircle,shape border rotate=90,
            minimum height=10mm,minimum width=5mm,
            font=\normalfont\sffamily\bfseries\Huge]
        at (current page.north east)
        {\llap{\arabic{chapter}\hspace{1mm}}};
    \else
      \node[fill=gray,text=black,anchor=north west,xshift=-2mm,
            yshift=-22mm-\arabic{chapter}*20mm,
            shape=semicircle,shape border rotate=270,
            minimum height=10mm,minimum width=5mm,
            font=\normalfont\sffamily\bfseries\Huge]
        at (current page.north west)
        {\rlap{\hspace{1mm}\arabic{chapter}}};
    \fi
  \endtikzpicture
  \endgroup
  \fi}
\makeatother

\usepackage{fancyhdr}
\fancypagestyle{plain}{%
\fancyhf{} % clear all header and footer fields
\fancyhead[r]{\thumb} % except the center
\renewcommand{\headrulewidth}{0pt}
\renewcommand{\footrulewidth}{0pt}}
%=========================åˆ¶ä½œæ‹‡æŒ‡ç´¢å¼•===================


\titlecontents{chapter}
[0em]
{}
{\large\CJKfamily{fzsong}{ç¬¬ \thecontentslabel ç« \quad}}
{}{\hfill\contentspage}
%
\titlecontents{section}
[4em]
{}
{\thecontentslabel\quad}
{}{\titlerule*{.} \contentspage}


\titleformat{\chapter}[display]
	{\bfseries\Large}
	{\titlerule[1pt]%
     \filleft%
    \parbox{1cm}{\vbox to 2.5cm{%
    \vfill\hbox to 1cm{\hfill\Huge ç¬¬ \hfill}%
    \vfill\hbox to 1cm{\hfill\Huge \thechapter\hfill}%
    \vfill\hbox to 1cm{\hfill\Huge ç«  \hfill}%
    }}}
	{1ex}
	{\Huge
	 \filright}
	[{\titlerule[2pt]}]

\title{\bf{podmanä½¿ç”¨ç¬”è®°}}
\author{virhuiai}
\date{}

% \usepackage{minted}
\usepackage[newfloat]{minted}%ï¼ˆæ¨èæ–¹å¼ï¼‰ é™¤äº†åŠ è½½ minted æ ¸å¿ƒåŠŸèƒ½å¤–ï¼Œè¿˜é€šè¿‡ newfloat é€‰é¡¹å¯ç”¨ newfloat åŒ…çš„é›†æˆã€‚
% newfloat åŒ…æ˜¯ caption åŒ…çš„é…å¥—åŒ…ï¼Œä¸“é—¨ç”¨äºå®šä¹‰æ–°çš„æµ®åŠ¨ç¯å¢ƒã€‚
% å¯ç”¨åï¼š
%   listing ç¯å¢ƒç”± newfloat åŒ…ç®¡ç†ï¼Œæ”¯æŒæ›´å®Œå–„çš„æµ®åŠ¨ä½“æ§åˆ¶ã€‚
%   ä¸ caption åŒ…æ·±åº¦å…¼å®¹ï¼ˆè‡ªåŠ¨å¤„ç†æ ‡é¢˜æ ¼å¼ã€ç¼–å·ã€å‚è€ƒç­‰ï¼‰ã€‚
%   æ”¯æŒ \listoflistingsï¼ˆä»£ç åˆ—è¡¨ï¼‰å‘½ä»¤ï¼Œç”Ÿæˆæ‰€æœ‰ä»£ç å—çš„ç›®å½•ã€‚
%   å³ä½¿ä¸åŠ è½½ float åŒ…ï¼Œä¹Ÿèƒ½æ­£å¸¸å·¥ä½œï¼Œä¸”æ›´ç°ä»£åŒ–ã€‚
\usepackage{caption}
% å¯é€‰ï¼šç¾åŒ–æ ‡é¢˜
\captionsetup[listing]{
  name=ä»£ç ,
  labelsep=quad,
  labelfont=bf
}
\setminted[shell]{
  % linenos=true,
  numbersep=8pt,
  frame=lines,
  framesep=2mm,
  baselinestretch=1.2,
  fontsize=\small,
  bgcolor=gray!5,
  breaklines=true,
  escapeinside=||
}

\begin{document}
\maketitle

\tableofcontents

\chapter{macOS ä¸ŠPodmançš„å®‰è£…é…ç½®}



\section{å‰è¨€}
æœ¬æ–‡æ¡£è®°å½•äº†åœ¨ macOS ç³»ç»Ÿä¸Šä½¿ç”¨ Homebrew å®‰è£…å¹¶é…ç½® \textbf{Podman} çš„å®Œæ•´æµç¨‹ï¼ŒåŒ…æ‹¬ï¼š
\begin{itemize}
  \item é…ç½®æ–‡ä»¶æŒä¹…åŒ–ï¼ˆç¬¦å·é“¾æ¥ï¼‰
  \item Podman è™šæ‹Ÿæœºåˆå§‹åŒ–ä¸å¯åŠ¨
  \item é•œåƒæºåŠ é€Ÿé…ç½®
  \item å­˜å‚¨è·¯å¾„è‡ªå®šä¹‰
  \item å¸¸è§é—®é¢˜ä¸ä¼˜åŒ–å»ºè®®
\end{itemize}

é€‚ç”¨äº macOS 15.6ï¼ŒPodman ç‰ˆæœ¬ 5.6.2ã€‚

\section{ç¯å¢ƒå‡†å¤‡ï¼šé…ç½®æ–‡ä»¶æŒä¹…åŒ–}

å°†ç”¨æˆ·é…ç½®æ–‡ä»¶è¿ç§»è‡³å¤–éƒ¨å­˜å‚¨ï¼ˆå¦‚ç§»åŠ¨ç¡¬ç›˜ï¼‰ï¼Œé˜²æ­¢ç³»ç»Ÿé‡è£…ä¸¢å¤±ã€‚

% \begin{listing}[htbp]
\begin{minted}[]{shell}
# ç§»åŠ¨ .zshrc åˆ°å¤–éƒ¨ç›®å½•
mv ~/.zshrc /Volumes/THAWSPACE/Soft.Ok/devEnv/

# åˆ›å»ºç¬¦å·é“¾æ¥
ln -s /Volumes/THAWSPACE/Soft.Ok/devEnv/.zshrc ~/.zshrc

# åˆ›å»ºå®¹å™¨é…ç½®ç›®å½•
mkdir -p /Volumes/THAWSPACE/Soft.Ok/devEnv/containers_config
mkdir -p /Volumes/THAWSPACE/Soft.Ok/devEnv/containers_share

# é“¾æ¥å®¹å™¨é…ç½®ç›®å½•
ln -s /Volumes/THAWSPACE/Soft.Ok/devEnv/containers_config ~/.config/containers
ln -s /Volumes/THAWSPACE/Soft.Ok/devEnv/containers_share ~/.local/share/containers
\end{minted}
% \caption{åˆ›å»ºç¬¦å·é“¾æ¥å’Œå®¹å™¨é…ç½®ç›®å½•}
% \label{code:symlink}
% \end{listing}


\section{Podman å®‰è£…ä¸åˆå§‹åŒ–}

\subsection{å®‰è£… Podman}
% \begin{lstlisting}[caption={ä½¿ç”¨ Homebrew å®‰è£… Podman}]
ä½¿ç”¨ Homebrew å®‰è£… Podman
\begin{minted}[]{shell}
brew install podman
\end{minted}
% \end{lstlisting}

å®‰è£…è¾“å‡ºç¤ºä¾‹ï¼ˆPodman 5.6.2ï¼‰ï¼š
\begin{minted}[]{shell}
==> Fetching podman
==> Downloading https://ghcr.io/v2/homebrew/core/podman/...
==> Pouring podman--5.6.2.sonoma.bottle.tar.gz
==> Caveats
In order to run containers locally, podman depends on a Linux kernel.
One can be started manually using `podman machine` from this package.
To start a podman VM automatically at login, also install the cask "podman-desktop".
==> Summary
ğŸº /usr/local/Cellar/podman/5.6.2: 217 files, 79.8MB
\end{minted}

\subsection{åˆå§‹åŒ–å¹¶å¯åŠ¨è™šæ‹Ÿæœº}

% æ¨èä½¿ç”¨ \lstinline|podman machine init --now| ä¸€é”®å®Œæˆåˆå§‹åŒ–ä¸å¯åŠ¨ï¼š
% \begin{lstlisting}[caption={åˆå§‹åŒ–å¹¶å¯åŠ¨ Podman è™šæ‹Ÿæœº}]
\begin{minted}[]{shell}
podman machine init --now
\end{minted}

ç­‰ä»·äºï¼š

\begin{minted}[]{shell}
podman machine init
podman machine start
\end{minted}


å¯åŠ¨æˆåŠŸåè¾“å‡ºï¼š
\begin{minted}[]{shell}
Machine "podman-machine-default" started successfully
API forwarding listening on: /var/run/docker.sock
Docker API clients default to this address. You do not need to set DOCKER_HOST.
\end{minted}

\section{æµ‹è¯•è¿è¡Œå®¹å™¨}

% \begin{lstlisting}[caption={è¿è¡Œ hello-world æµ‹è¯•å®¹å™¨}]
\begin{minted}[]{shell}
# è¿è¡Œ hello-world æµ‹è¯•å®¹å™¨
podman run --rm hello-world
\end{minted}

è¾“å‡ºï¼š
\begin{minted}[]{shell}
!... Hello Podman World ...!
         .--"--.
       / - - \
      / (O) (O) \
   ~~~| -=(,Y,)=- |
    .---. /` \ |~~
 ~/ o o \~~~~.----. ~~
  | =(X)= |~ / (O (O) \
   ~~~~~~~ ~| =(Y_)=- |
  ~~~~ ~~~| U |~~
Project: https://github.com/containers/podman
Website: https://podman.io
\end{minted}

\section{é•œåƒæºåŠ é€Ÿ}

\begin{minted}[]{shell}
podman pull docker.1ms.run/erlang:28.1.0.0-alpine
\end{minted}

% \subsection{æ–¹æ³•ä¸€ï¼šåœ¨è™šæ‹Ÿæœºå†…ä¿®æ”¹ï¼ˆæ¨èï¼‰}

% è¿›å…¥ Podman è™šæ‹Ÿæœºï¼š
% \begin{lstlisting}[caption={è¿›å…¥ Podman è™šæ‹Ÿæœº}]
% podman machine ssh
% \end{lstlisting}

% ç¼–è¾‘é•œåƒæºé…ç½®æ–‡ä»¶ï¼š
% \begin{lstlisting}
% sudo vi /etc/containers/registries.conf.d/999-podman-machine.conf
% \end{lstlisting}

% å†…å®¹å¦‚ä¸‹ï¼š
% \begin{lstlisting}[language=toml, caption={999-podman-machine.conf}]
% unqualified-search-registries = ["docker.io"]

% [[registry]]
% prefix = "docker.io"
% location = "docker.1ms.run"

% [[registry]]
% prefix = "docker.io"
% location = "hub.rat.dev"

% [[registry]]
% prefix = "docker.io"
% location = "docker.xuanyuan.me"

% [[registry]]
% prefix = "docker.io"
% location = "docker.1panel.live"
% \end{lstlisting}

% \subsection{æ–¹æ³•äºŒï¼šå®¿ä¸»æœºé…ç½®ï¼ˆrootless æ¨¡å¼ï¼‰}

% åœ¨ \lstinline|~/.config/containers/registries.conf| ä¸­æ·»åŠ ï¼š

% \begin{lstlisting}[language=toml]
% unqualified-search-registries = ["docker.io"]

% [[registry]]
% prefix = "docker.io"
% location = "docker.mirrors.ustc.edu.cn"
% \end{lstlisting}

% \section{è‡ªå®šä¹‰é•œåƒå­˜å‚¨è·¯å¾„}

% ç¼–è¾‘ \lstinline|~/.config/containers/storage.conf|ï¼š

% \begin{lstlisting}[language=toml, caption={storage.conf å…³é”®é…ç½®}]
% [storage]
% graphroot = "/Volumes/THAWSPACE/Soft.Ok/devEnv/podman_containers"
% runroot = "/run/containers/storage"

% [storage.options]
% # å¯é€‰ï¼šè°ƒæ•´ overlay é©±åŠ¨å‚æ•°
% \end{lstlisting}

% > \textbf{æ³¨æ„}ï¼š\lstinline|graphroot| ä¸ºå®¹å™¨é•œåƒå’Œå·çš„å­˜å‚¨æ ¹ç›®å½•ã€‚

% \section{è¿›é˜¶ï¼šErlang é•œåƒæ‹‰å–æµ‹è¯•}

% \begin{lstlisting}[caption={æ‹‰å– Erlang é•œåƒ}]
% podman pull docker.1ms.run/erlang:28.1.0.0-alpine
% \end{lstlisting}

% \section{å¸¸è§é—®é¢˜ä¸å»ºè®®}

% \begin{itemize}
%   \item \textbf{æƒé™é—®é¢˜}ï¼šè‹¥éœ€ç»‘å®šä½ç«¯å£ï¼ˆ<1024ï¼‰ï¼Œæ‰§è¡Œï¼š
%     \begin{lstlisting}
%     podman machine set --rootful
%     \end{lstlisting}
%   \item \textbf{Docker å…¼å®¹æ€§}ï¼šè®¾ç½®ç¯å¢ƒå˜é‡ï¼š
%     \begin{lstlisting}
%     export DOCKER_HOST='unix:///var/folders/.../podman-machine-default-api.sock'
%     \end{lstlisting}
%     æˆ–å®‰è£… \lstinline|podman-mac-helper|ã€‚
%   \item \textbf{è‡ªåŠ¨å¯åŠ¨}ï¼šå®‰è£… \lstinline|podman-desktop| Cask å®ç°å¼€æœºè‡ªå¯ã€‚
% \end{itemize}

% \section{å‚è€ƒèµ„æ–™}

% \begin{itemize}
%   \item å®˜æ–¹æ–‡æ¡£: \url{https://docs.podman.io}
%   \item GitHub: \url{https://github.com/containers/podman}
%   \item Podman Desktop: \url{https://podman-desktop.io}
%   \item é•œåƒåŠ é€Ÿ: \url{https://blog.csdn.net/adorechen/article/details/147652534}
%   \item å­˜å‚¨é…ç½®: \url{https://github.com/containers/podman/blob/main/docs/tutorials/rootless_tutorial.md}
% \end{itemize}




\end{document} 

\begin{minted}{shell}

\end{minted}

\end{document} 